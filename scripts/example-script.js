// ============================================
// ×“×•×’××” ×œ×¡×§×¨×™×¤×˜ - ××™×š ×œ×™×¦×•×¨ ×¡×§×¨×™×¤×˜ ×—×“×©
// ============================================

// 1. ×™×™×‘×•× Prisma Client - ×–×” ××” ×©××—×‘×¨ ××•×ª× ×• ×œ××¡×“ ×”× ×ª×•× ×™×
const { PrismaClient } = require('@prisma/client');

// 2. ×™×¦×™×¨×ª instance ×©×œ Prisma
const prisma = new PrismaClient();

// 3. ×”×¤×•× ×§×¦×™×” ×”×¨××©×™×ª - ×›××Ÿ × ×›×ª×•×‘ ××ª ×”×œ×•×’×™×§×” ×©×œ× ×•
async function myMainFunction() {
  console.log('ğŸš€ ×”×ª×—×œ×ª ×”×¡×§×¨×™×¤×˜...');
  
  // ×“×•×’××” 1: ×§×¨×™××ª × ×ª×•× ×™× ××”××¡×“ × ×ª×•× ×™×
  const users = await prisma.user.findMany({
    take: 5, // ×œ×§×—×ª ×¨×§ 5 ××©×ª××©×™× ×¨××©×•× ×™×
    select: {
      id: true,
      name: true,
      email: true,
      coins: true
    }
  });
  
  console.log(`ğŸ“Š ××¦××ª×™ ${users.length} ××©×ª××©×™×:`);
  users.forEach(user => {
    console.log(`   - ${user.name} (${user.email}) - ${user.coins} ××˜×‘×¢×•×ª`);
  });
  
  // ×“×•×’××” 2: ×™×¦×™×¨×ª ×¨×©×•××” ×—×“×©×”
  // const newItem = await prisma.shopItem.create({
  //   data: {
  //     name: '×¤×¨×™×˜ ×—×“×©',
  //     description: '×ª×™××•×¨ ×”×¤×¨×™×˜',
  //     category: 'furniture',
  //     price: 100,
  //     icon: 'ğŸª‘',
  //     rarity: 'common'
  //   }
  // });
  // console.log('âœ… ×¤×¨×™×˜ ×—×“×© × ×•×¦×¨:', newItem.name);
  
  // ×“×•×’××” 3: ×¢×“×›×•×Ÿ ×¨×©×•××”
  // await prisma.user.update({
  //   where: { id: 'user-id-here' },
  //   data: { coins: 1000 }
  // });
  
  // ×“×•×’××” 4: ××—×™×§×ª ×¨×©×•××”
  // await prisma.user.delete({
  //   where: { id: 'user-id-here' }
  // });
  
  // ×“×•×’××” 5: ×—×™×¤×•×© ×¢× ×ª× ××™×
  // const richUsers = await prisma.user.findMany({
  //   where: {
  //     coins: {
  //       gte: 1000 // ×’×“×•×œ ××• ×©×•×•×” ×œ-1000
  //     }
  //   }
  // });
  
  console.log('âœ… ×”×¡×§×¨×™×¤×˜ ×”×¡×ª×™×™× ×‘×”×¦×œ×—×”!');
}

// 4. ×”×¤×•× ×§×¦×™×” ×”×¨××©×™×ª ×©××ª×—×™×œ×” ××ª ×”×›×œ
async function main() {
  try {
    // ×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ××¡×“ ×”× ×ª×•× ×™×
    console.log('ğŸ”Œ ×‘×•×“×§ ×—×™×‘×•×¨ ×œ××¡×“ ×”× ×ª×•× ×™×...');
    await prisma.$connect();
    console.log('âœ… ×”×ª×—×‘×¨×•×ª ×”×¦×œ×™×—×”!');
    
    // ×”×¨×¦×ª ×”×¤×•× ×§×¦×™×” ×”×¨××©×™×ª
    await myMainFunction();
    
  } catch (error) {
    // ×˜×™×¤×•×œ ×‘×©×’×™××•×ª
    console.error('âŒ ×©×’×™××”:', error);
    
    if (error.message.includes('connection')) {
      console.error('ğŸ’¡ ×‘×¢×™×™×ª ×—×™×‘×•×¨ - ×‘×“×•×§ ××ª DATABASE_URL ×‘×§×•×‘×¥ .env');
    }
    
    // ×™×¦×™××” ×¢× ×§×•×“ ×©×’×™××”
    process.exit(1);
  } finally {
    // ×ª××™×“ ×œ×¡×’×•×¨ ××ª ×”×—×™×‘×•×¨ ×‘×¡×•×£
    await prisma.$disconnect();
    console.log('ğŸ”Œ ×”×—×™×‘×•×¨ × ×¡×’×¨');
  }
}

// 5. ×”×¨×¦×ª ×”×¡×§×¨×™×¤×˜
main();

// ============================================
// ××™×š ×œ×”×¨×™×¥ ××ª ×”×¡×§×¨×™×¤×˜:
// ============================================
// 1. ×¤×ª×— ×˜×¨××™× ×œ/CMD
// 2. ×¢×‘×•×¨ ×œ×ª×™×§×™×™×ª ×”×¤×¨×•×™×§×˜: cd "C:\Users\a0534\OneDrive\×©×•×œ×—×Ÿ ×”×¢×‘×•×“×”\giboy"
// 3. ×”×¨×¥: node scripts/example-script.js
//
// ============================================
// ××‘× ×” ×¡×§×¨×™×¤×˜ ×˜×™×¤×•×¡×™:
// ============================================
// 1. ×™×™×‘×•× Prisma Client
// 2. ×™×¦×™×¨×ª instance
// 3. ×¤×•× ×§×¦×™×” ×¨××©×™×ª ×¢× ×”×œ×•×’×™×§×”
// 4. ×¤×•× ×§×¦×™×” main() ×¢× try/catch/finally
// 5. ×§×¨×™××” ×œ-main()
//
// ============================================
// ×¤×¢×•×œ×•×ª × ×¤×•×¦×•×ª ×‘-Prisma:
// ============================================
// findMany() - ××¦× ×›××” ×¨×©×•××•×ª
// findUnique() - ××¦× ×¨×©×•××” ××—×ª ×œ×¤×™ ××¤×ª×— ×™×™×—×•×“×™
// findFirst() - ××¦× ××ª ×”×¨×©×•××” ×”×¨××©×•× ×”
// create() - ×¦×•×¨ ×¨×©×•××” ×—×“×©×”
// update() - ×¢×“×›×Ÿ ×¨×©×•××” ×§×™×™××ª
// delete() - ××—×§ ×¨×©×•××”
// count() - ×¡×¤×•×¨ ×›××” ×¨×©×•××•×ª ×™×©
// upsert() - ×¢×“×›×Ÿ ×× ×§×™×™×, ×¦×•×¨ ×× ×œ× ×§×™×™×
//
// ============================================
// ×“×•×’×××•×ª ×œ×©××™×œ×ª×•×ª:
// ============================================
// // ××¦× ×›×œ ×”××©×ª××©×™×
// const users = await prisma.user.findMany();
//
// // ××¦× ××©×ª××© ×œ×¤×™ ID
// const user = await prisma.user.findUnique({
//   where: { id: 'user-id' }
// });
//
// // ××¦× ××©×ª××©×™× ×¢× ×™×•×ª×¨ ×-1000 ××˜×‘×¢×•×ª
// const richUsers = await prisma.user.findMany({
//   where: {
//     coins: { gte: 1000 }
//   }
// });
//
// // ×¦×•×¨ ×”×™×©×’ ×—×“×©
// const achievement = await prisma.achievement.create({
//   data: {
//     name: '×”×™×©×’ ×—×“×©',
//     description: '×ª×™××•×¨ ×”×”×™×©×’',
//     icon: 'ğŸ†',
//     category: 'games',
//     requirement: 10,
//     reward: 50,
//     difficulty: 'easy',
//     xpReward: 100
//   }
// });
//
// // ×¢×“×›×Ÿ ××˜×‘×¢×•×ª ×œ××©×ª××©
// await prisma.user.update({
//   where: { id: 'user-id' },
//   data: { coins: 2000 }
// });
//
// ============================================

